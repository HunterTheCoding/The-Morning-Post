import { useEffect, useState } from "react";
import {
  loadCaptchaEnginge,
  LoadCanvasTemplate,
  validateCaptcha,
} from "react-simple-captcha";
import { FcGoogle } from "react-icons/fc";

const Login = () => {
  const [disabled, setDisabled] = useState(true);
  const [loginModalOpen, setLoginModalOpen] = useState(false);
  const [signUpModalOpen, setSignUpModalOpen] = useState(false);

  useEffect(() => {
    loadCaptchaEnginge(6);
  }, []);

  const handleValidateCapture = (e) => {
    const user_captcha_value = e.target.value;
    console.log(user_captcha_value);
    if (validateCaptcha(user_captcha_value)) {
      setDisabled(false);
    } else {
      setDisabled(true);
    }
  };

  const handleOpenLoginModal = () => {
    setLoginModalOpen(true);
  };

  const handleCloseLoginModal = () => {
    setLoginModalOpen(false);
  };

  const handleOpenSignUpModal = () => {
    handleCloseLoginModal(); // Close the login modal before opening the signup modal
    setSignUpModalOpen(true);
  };

  const handleCloseSignUpModal = () => {
    setSignUpModalOpen(false);
  };

  const handleSignUpSubmit = (e) => {
    e.preventDefault(); // Prevent the default form submission behavior
    // Add your sign-up logic here
    console.log("Sign-up form submitted!");
    handleCloseSignUpModal(); // Close the signup modal after submitting
  };

  return (
    <div>
      <h2 className="text-3xl font-extrabold">This is Login Section</h2>

      {/* Open Login Modal Button */}
      <button className="btn" onClick={handleOpenLoginModal}>
        Open Login Modal
      </button>

      {/* Open Sign Up Modal Button */}
      <button className="btn" onClick={handleOpenSignUpModal}>
        Open Sign Up Modal
      </button>

      {/* Login Modal */}
      {loginModalOpen && (
        <dialog id="my_modal_login" className="modal">
          <div className="modal-box">
            <form method="dialog">
              <button
                className="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
                onClick={handleCloseLoginModal}
              >
                ✕
              </button>
            </form>
            <form
              action=""
              className="space-y-6 ng-untouched ng-pristine ng-valid"
            >
              {/* ... Login modal content ... */}

              <div>
                <button
                  disabled={disabled}
                  type="submit"
                  className="bg-rose-500 w-full rounded-md py-3 text-white"
                >
                  LOGIN NOW
                </button>
              </div>
            </form>
          </div>
        </dialog>
      )}

      {/* Sign Up Modal */}
      {signUpModalOpen && (
        <dialog id="my_modal_signup" className="modal">
          <div className="modal-box">
            <form method="dialog" onSubmit={handleSignUpSubmit}>
              <button
                className="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
                onClick={handleCloseSignUpModal}
              >
                ✕
              </button>
            </form>
            <form
              action=""
              className="space-y-6 ng-untouched ng-pristine ng-valid"
            >
              {/* ... Sign Up modal content ... */}

              <div>
                <button
                  disabled={disabled}
                  type="submit"
                  className="bg-rose-500 w-full rounded-md py-3 text-white"
                >
                  SIGN UP NOW
                </button>
              </div>
            </form>
          </div>
        </dialog>
      )}
    </div>
  );
};

export default Login;
